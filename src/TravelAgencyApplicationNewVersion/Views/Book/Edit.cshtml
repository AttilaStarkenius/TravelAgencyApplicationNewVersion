@model TravelAgencyApplicationNewVersion.Models.ReservationDetails
@{
    ViewData["Title"] = "Edit";
    Layout = "~/Views/Shared/_myLayoutPage.cshtml";

}

<script type="text/javascript" src="~/Scripts/validation.js"></script>


<h2>Edit</h2>

<form asp-action="Edit" onsubmit = "return validateEdit()">
    <div class="form-horizontal">
        <h4>Reservation details</h4>
        <hr />
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

        @*<input type="hidden" asp-for="DepartureTime" />*@

        <input type="hidden" asp-for="Price" />

        <input type="hidden" asp-for="Email" />

        <input type="hidden" asp-for="ReservationDetailsId" />
        <div class="form-group">            
            <div class="col-md-2">
                ReservationDetailsId: @Html.DisplayFor(model => model.ReservationDetailsId)
                </div>
            </div>
        <div class="form-group">
            <div class="col-md-2">
                Booking date: @Html.DisplayFor(model => model.BookingDate)
                <input type="hidden" asp-for="BookingDate" />

            </div>
        </div>

        @if (Model.RoomId == null)
        {

            <div class="form-group">
                <div class="col-md-2">
                    Departure time: @Html.DisplayFor(model => model.DepartureTime)
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-2">
                    Arrival time: @Html.DisplayFor(model => model.ArrivalTime)
                </div>
            </div>

        }

        @if (Model.SeatId == null)
        {

            <div class="form-group">
                <div class="col-md-2">
                    Check-in date: @Html.DisplayFor(model => model.DepartureTime) 
                </div>
            </div>

            <input type="hidden" asp-for="SeatId" />

            @*<div class="form-group">
                    <label asp-for="DepartureTime" class="col-md-2 control-label"></label>
                    <div class="col-md-10">
                        <input asp-for="DepartureTime" class="form-control" />
                        <span asp-validation-for="DepartureTime" class="text-danger" />
                    </div>
                </div>*@

        <h2>Change Check-in date</h2>

        <input asp-for="DepartureTime" /> 

        @*<div class="form-group">
            <label asp-for="ArrivalTime" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <input asp-for="ArrivalTime" class="form-control" />
                <span asp-validation-for="ArrivalTime" class="text-danger" />
            </div>
        </div>*@

            <div class="form-group">
                <div class="col-md-2">
                    <br /><br />Check-out date: @Html.DisplayFor(model => model.ArrivalTime)
                </div>
            </div>

            <h2>Change Check-out date</h2>

            <input asp-for="ArrivalTime" />

        }
        <div class="form-group">
            <div class="col-md-2">
                <br/><br />Price: @Html.DisplayFor(model => model.Price) United states dollars
            </div>
        </div>
    @if (Model.RoomId == null) { 
        <div class="form-group">
            <div class="col-md-2">
                First class: @Html.DisplayFor(model => model.FirstClass)
            </div>
        </div>
    }
    @if (Model.RoomId == null)
    {
        <div class="form-group">
            <label asp-for="SeatId" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <input asp-for="SeatId" id="SeatId" min="3" class="form-control" />
                <span asp-validation-for="SeatId" class="text-danger" />
            </div>
        </div>
    }
        <div class="form-group">
            <div class="col-md-2">
                Invoice expiry date: @Html.DisplayFor(model => model.InvoiceExpiryDate) 
                <input type="hidden" asp-for="InvoiceExpiryDate" />

            </div>
        </div>
    @if (Model.SeatId == null)
    {

        <div class="form-group">
            <div class="col-md-2">
                RoomId: @Html.DisplayFor(model => model.RoomId)
            </div>
        </div>

        @*<div class="form-group">
            <label asp-for="RoomId" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <input asp-for="RoomId" min="1" class="form-control" />
                <span asp-validation-for="RoomId" class="text-danger" />
            </div>
        </div>*@
    }
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Save" class="btn btn-default" />
            </div>
        </div>
    </div>
</form>

<div>
    <a asp-action="ViewBookings">Back to List</a>
</div>

<script type="text/javascript">

    function validateEdit() {
        var x = document.getElementById('SeatId').value;

        if (!x) {
            alert("SeatId must be filled out!");
            return false;
        }

        //if (!x) {
        //    alert("Departure date must be filled out!");
        //    return false;
        //}

    }

</script>

@section footer{
    <p class="lead">
        &copy 2017 Attila Starkenius
    </p>
}
